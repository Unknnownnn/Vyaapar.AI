"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.initializeVmTraceDecoder = exports.VmTraceDecoder = void 0;
const chalk_1 = __importDefault(require("chalk"));
const debug_1 = __importDefault(require("debug"));
const reporter_1 = require("../../sentry/reporter");
const napi_rs_1 = require("../../../common/napi-rs");
const log = (0, debug_1.default)("hardhat:core:hardhat-network:node");
const { VmTraceDecoder, initializeVmTraceDecoder } = (0, napi_rs_1.requireNapiRsModule)("@nomicfoundation/edr");
exports.VmTraceDecoder = VmTraceDecoder;
function initializeVmTraceDecoderWrapper(vmTraceDecoder, tracingConfig) {
    try {
        initializeVmTraceDecoder(vmTraceDecoder, tracingConfig);
    }
    catch (error) {
        console.warn(chalk_1.default.yellow("The Hardhat Network tracing engine could not be initialized. Run Hardhat with --verbose to learn more."));
        log("Hardhat Network tracing disabled: VmTraceDecoder failed to be initialized. Please report this to help us improve Hardhat.\n", error);
        if (error instanceof Error) {
            reporter_1.Reporter.reportError(error);
        }
    }
}
exports.initializeVmTraceDecoder = initializeVmTraceDecoderWrapper;
//# sourceMappingURL=vm-trace-decoder.js.map